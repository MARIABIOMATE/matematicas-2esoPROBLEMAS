<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matem√°ticas 2¬∫ ESO - Problemas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        .fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            vertical-align: middle;
            margin: 0 8px;
        }
        .fraction-num {
            padding: 0 10px 4px 10px;
            border-bottom: 3px solid #000;
            font-size: 1.4em;
            font-weight: bold;
        }
        .fraction-den {
            padding: 4px 10px 0 10px;
            font-size: 1.4em;
            font-weight: bold;
        }
        .regla-tres-box {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 4px solid #3b82f6;
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
        }
        .regla-tres-simple {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin: 20px 0;
            font-size: 1.5em;
            font-weight: 700;
        }
        .regla-tres-col {
            text-align: center;
        }
        .formula-box {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border: 4px solid #10b981;
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
            font-size: 1.3em;
        }
        .directa-box {
            background: #dbeafe;
            border: 3px solid #2563eb;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            font-weight: 600;
            font-size: 1.1em;
        }
        .inversa-box {
            background: #fef3c7;
            border: 3px solid #f59e0b;
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            font-weight: 600;
            font-size: 1.1em;
        }
        .cruz-visual {
            position: relative;
            display: inline-block;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
        function frac(num, den) {
            return `<span class="fraction"><span class="fraction-num">${num}</span><span class="fraction-den">${den}</span></span>`;
        }

        const blocks = {
            1: { title: "PROPORCIONALIDAD", icon: "‚öñÔ∏è", color: "from-blue-500 to-blue-600" },
            2: { title: "PORCENTAJES", icon: "üíØ", color: "from-purple-500 to-purple-600" },
            3: { title: "REPARTOS PROPORCIONALES", icon: "üéÇ", color: "from-pink-500 to-pink-600" },
            4: { title: "PROBLEMAS CON FRACCIONES", icon: "üßÆ", color: "from-green-500 to-green-600" }
        };

        const levelNames = {
            "1": { 
                "1.1": "Simple DIRECTA", 
                "1.2": "Simple INVERSA", 
                "1.3": "Compuesta Directa+Directa", 
                "1.4": "Compuesta Mixta" 
            },
            "2": { "2.1": "Calcular Precio Final", "2.2": "Calcular Precio Inicial", "2.3": "Calcular Porcentaje" },
            "3": { "3.1": "Reparto Directo", "3.2": "Reparto Inverso" },
            "4": { "4.1": "Problemas con Fracciones" }
        };

        const exerciseData = {
            "1-1.1": [
                { 
                    q: "Si 3 kg de naranjas cuestan 12‚Ç¨, ¬øcu√°nto costar√°n 5 kg?", 
                    a: "20", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 20px;">üìã REGLA DE TRES SIMPLE DIRECTA</div>
                        <div class="regla-tres-simple">
                            <div class="regla-tres-col">
                                <div style="color: #1e40af; margin-bottom: 12px;">Kilogramos</div>
                                <div style="color: #1e40af;">3 kg</div>
                                <div style="color: #1e40af; margin-top: 16px;">5 kg</div>
                            </div>
                            <div class="regla-tres-col">
                                <div style="color: #dc2626; margin-bottom: 12px;">Precio</div>
                                <div style="color: #dc2626;">12‚Ç¨</div>
                                <div style="color: #dc2626; margin-top: 16px;">X‚Ç¨</div>
                            </div>
                        </div>
                    </div>

                    <div class="directa-box" style="text-align: center; font-size: 1.2em;">
                        ‚úÖ <strong>DIRECTA</strong>: M√°s kg ‚Üí m√°s precio<br>
                        <span style="color: #dc2626; font-size: 1.3em;">¬°SE MULTIPLICA EN CRUZ! ‚úï</span>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ MULTIPLICACI√ìN EN CRUZ:</div>
                        <div style="text-align: center; font-size: 1.5em; line-height: 2;">
                            <strong>3 √ó X = 5 √ó 12</strong><br>
                            <strong>X = (5 √ó 12) √∑ 3</strong><br>
                            <strong>X = 60 √∑ 3</strong><br>
                            <span style="color: #16a34a; font-size: 1.3em;">X = 20‚Ç¨</span>
                        </div>
                    </div>`
                },
                { 
                    q: "Un coche consume 8 litros en 100 km. ¬øCu√°ntos litros consumir√° en 250 km?", 
                    a: "20", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 20px;">üìã REGLA DE TRES SIMPLE DIRECTA</div>
                        <div class="regla-tres-simple">
                            <div class="regla-tres-col">
                                <div style="color: #1e40af; margin-bottom: 12px;">Kil√≥metros</div>
                                <div style="color: #1e40af;">100 km</div>
                                <div style="color: #1e40af; margin-top: 16px;">250 km</div>
                            </div>
                            <div class="regla-tres-col">
                                <div style="color: #dc2626; margin-bottom: 12px;">Litros</div>
                                <div style="color: #dc2626;">8 L</div>
                                <div style="color: #dc2626; margin-top: 16px;">X L</div>
                            </div>
                        </div>
                    </div>

                    <div class="directa-box" style="text-align: center; font-size: 1.2em;">
                        ‚úÖ <strong>DIRECTA</strong>: M√°s km ‚Üí m√°s litros<br>
                        <span style="color: #dc2626; font-size: 1.3em;">¬°SE MULTIPLICA EN CRUZ! ‚úï</span>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ MULTIPLICACI√ìN EN CRUZ:</div>
                        <div style="text-align: center; font-size: 1.5em; line-height: 2;">
                            <strong>100 √ó X = 250 √ó 8</strong><br>
                            <strong>X = (250 √ó 8) √∑ 100</strong><br>
                            <strong>X = 2000 √∑ 100</strong><br>
                            <span style="color: #16a34a; font-size: 1.3em;">X = 20 litros</span>
                        </div>
                    </div>`
                },
                { 
                    q: "Si 4 obreros hacen un trabajo en 6 d√≠as (trabajando las mismas horas), ¬øcu√°nto tardar√°n 6 obreros?", 
                    a: "4", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 20px;">üìã ¬°CUIDADO! Esta es INVERSA</div>
                        <div class="regla-tres-simple">
                            <div class="regla-tres-col">
                                <div style="color: #1e40af; margin-bottom: 12px;">Obreros</div>
                                <div style="color: #1e40af;">4</div>
                                <div style="color: #1e40af; margin-top: 16px;">6</div>
                            </div>
                            <div class="regla-tres-col">
                                <div style="color: #dc2626; margin-bottom: 12px;">D√≠as</div>
                                <div style="color: #dc2626;">6</div>
                                <div style="color: #dc2626; margin-top: 16px;">X</div>
                            </div>
                        </div>
                    </div>

                    <div class="inversa-box" style="text-align: center; font-size: 1.2em;">
                        ‚ö†Ô∏è <strong>INVERSA</strong>: M√°s obreros ‚Üí menos d√≠as<br>
                        <span style="color: #dc2626; font-size: 1.3em;">¬°NO se multiplica en cruz!</span>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ C√ÅLCULO:</div>
                        <div style="text-align: center; font-size: 1.5em; line-height: 2;">
                            X = 6 √ó ${frac('4','6')}<br>
                            <strong>X = 6 √ó 0,67</strong><br>
                            <span style="color: #16a34a; font-size: 1.3em;">X = 4 d√≠as</span>
                        </div>
                    </div>`
                }
            ],
            "1-1.2": [
                { 
                    q: "3 grifos llenan un dep√≥sito en 10 horas. ¬øCu√°nto tardar√°n 5 grifos?", 
                    a: "6", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 20px;">üìã REGLA DE TRES SIMPLE INVERSA</div>
                        <div class="regla-tres-simple">
                            <div class="regla-tres-col">
                                <div style="color: #1e40af; margin-bottom: 12px;">Grifos</div>
                                <div style="color: #1e40af;">3</div>
                                <div style="color: #1e40af; margin-top: 16px;">5</div>
                            </div>
                            <div class="regla-tres-col">
                                <div style="color: #dc2626; margin-bottom: 12px;">Horas</div>
                                <div style="color: #dc2626;">10</div>
                                <div style="color: #dc2626; margin-top: 16px;">X</div>
                            </div>
                        </div>
                    </div>

                    <div class="inversa-box" style="text-align: center; font-size: 1.2em;">
                        ‚ö†Ô∏è <strong>INVERSA</strong>: M√°s grifos ‚Üí menos tiempo<br>
                        <span style="color: #dc2626; font-size: 1.3em;">¬°NO SE MULTIPLICA EN CRUZ!</span>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ C√ÅLCULO (fracci√≥n girada):</div>
                        <div style="text-align: center; font-size: 1.5em; line-height: 2;">
                            X = 10 √ó ${frac('3','5')}<br>
                            <strong>X = 10 √ó 0,6</strong><br>
                            <span style="color: #16a34a; font-size: 1.3em;">X = 6 horas</span>
                        </div>
                        <div style="margin-top: 20px; background: #fef3c7; padding: 12px; border-radius: 8px;">
                            La fracci√≥n ${frac('3','5')} est√° <strong>GIRADA</strong>:<br>
                            el viejo (3) arriba, el nuevo (5) abajo
                        </div>
                    </div>`
                },
                { 
                    q: "8 trabajadores terminan una obra en 15 d√≠as. ¬øCu√°nto tardar√°n 12 trabajadores?", 
                    a: "10", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 20px;">üìã REGLA DE TRES SIMPLE INVERSA</div>
                        <div class="regla-tres-simple">
                            <div class="regla-tres-col">
                                <div style="color: #1e40af; margin-bottom: 12px;">Trabajadores</div>
                                <div style="color: #1e40af;">8</div>
                                <div style="color: #1e40af; margin-top: 16px;">12</div>
                            </div>
                            <div class="regla-tres-col">
                                <div style="color: #dc2626; margin-bottom: 12px;">D√≠as</div>
                                <div style="color: #dc2626;">15</div>
                                <div style="color: #dc2626; margin-top: 16px;">X</div>
                            </div>
                        </div>
                    </div>

                    <div class="inversa-box" style="text-align: center; font-size: 1.2em;">
                        ‚ö†Ô∏è <strong>INVERSA</strong>: M√°s trabajadores ‚Üí menos d√≠as<br>
                        <span style="color: #dc2626; font-size: 1.3em;">¬°NO SE MULTIPLICA EN CRUZ!</span>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ C√ÅLCULO:</div>
                        <div style="text-align: center; font-size: 1.5em; line-height: 2;">
                            X = 15 √ó ${frac('8','12')}<br>
                            <strong>X = 15 √ó 0,67</strong><br>
                            <span style="color: #16a34a; font-size: 1.3em;">X = 10 d√≠as</span>
                        </div>
                    </div>`
                }
            ],
            "1-1.3": [
                { 
                    q: "6 m√°quinas fabrican 120 piezas en 5 horas. ¬øCu√°ntas piezas fabricar√°n 9 m√°quinas en 8 horas?", 
                    a: "288", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 16px;">üìã REGLA DE TRES COMPUESTA</div>
                        <div style="font-size: 1.4em; font-weight: 700; text-align: center; line-height: 2;">
                            <span style="color: #1e40af;">6 m√°quinas, 5 horas</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626;">120 piezas</span><br>
                            <span style="color: #1e40af;">9 m√°quinas, 8 horas</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626; font-size: 1.6em;">X</span>
                        </div>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ PLANTEAMIENTO:</div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; font-size: 1.5em;">
                            <span style="color: #dc2626; font-weight: bold;">X =</span>
                            <span style="color: #1e3a8a;">120</span>
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('9','6')}
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('8','5')}
                        </div>
                        <div style="text-align: center; margin-top: 20px; font-size: 1.3em;">
                            = 120 √ó 1,5 √ó 1,6 = <span style="color: #16a34a; font-weight: bold; font-size: 1.4em;">288 piezas</span>
                        </div>
                    </div>

                    <div class="directa-box">
                        ‚úÖ <strong>AMBAS DIRECTAS</strong> (fracciones normales):<br>
                        ‚Ä¢ M√°s m√°quinas ‚Üí m√°s piezas ‚Üí ${frac('9','6')} (nuevo arriba)<br>
                        ‚Ä¢ M√°s horas ‚Üí m√°s piezas ‚Üí ${frac('8','5')} (nuevo arriba)
                    </div>`
                },
                { 
                    q: "4 pintores pintan 80 m¬≤ en 3 d√≠as. ¬øCu√°ntos m¬≤ pintar√°n 6 pintores en 5 d√≠as?", 
                    a: "200", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 16px;">üìã REGLA DE TRES COMPUESTA</div>
                        <div style="font-size: 1.4em; font-weight: 700; text-align: center; line-height: 2;">
                            <span style="color: #1e40af;">4 pintores, 3 d√≠as</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626;">80 m¬≤</span><br>
                            <span style="color: #1e40af;">6 pintores, 5 d√≠as</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626; font-size: 1.6em;">X</span>
                        </div>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ PLANTEAMIENTO:</div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; font-size: 1.5em;">
                            <span style="color: #dc2626; font-weight: bold;">X =</span>
                            <span style="color: #1e3a8a;">80</span>
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('6','4')}
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('5','3')}
                        </div>
                        <div style="text-align: center; margin-top: 20px; font-size: 1.3em;">
                            = 80 √ó 1,5 √ó 1,67 = <span style="color: #16a34a; font-weight: bold; font-size: 1.4em;">200 m¬≤</span>
                        </div>
                    </div>

                    <div class="directa-box">
                        ‚úÖ <strong>AMBAS DIRECTAS:</strong><br>
                        ‚Ä¢ M√°s pintores ‚Üí m√°s m¬≤ ‚Üí ${frac('6','4')}<br>
                        ‚Ä¢ M√°s d√≠as ‚Üí m√°s m¬≤ ‚Üí ${frac('5','3')}
                    </div>`
                }
            ],
            "1-1.4": [
                { 
                    q: "6 obreros construyen un muro en 12 d√≠as trabajando 8 horas diarias. ¬øCu√°ntos d√≠as tardar√°n 8 obreros trabajando 6 horas diarias?", 
                    a: "12", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 16px;">üìã REGLA DE TRES COMPUESTA MIXTA</div>
                        <div style="font-size: 1.4em; font-weight: 700; text-align: center; line-height: 2;">
                            <span style="color: #1e40af;">6 obreros, 8 h/d√≠a</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626;">12 d√≠as</span><br>
                            <span style="color: #1e40af;">8 obreros, 6 h/d√≠a</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626; font-size: 1.6em;">X</span>
                        </div>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ PLANTEAMIENTO:</div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; font-size: 1.5em;">
                            <span style="color: #dc2626; font-weight: bold;">X =</span>
                            <span style="color: #1e3a8a;">12</span>
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('6','8')}
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('8','6')}
                        </div>
                        <div style="text-align: center; margin-top: 20px; font-size: 1.3em;">
                            = 12 √ó 0,75 √ó 1,33 = <span style="color: #16a34a; font-weight: bold; font-size: 1.4em;">12 d√≠as</span>
                        </div>
                    </div>

                    <div class="inversa-box">
                        ‚ö†Ô∏è <strong>AMBAS INVERSAS</strong> (fracciones GIRADAS):<br>
                        ‚Ä¢ M√°s obreros ‚Üí menos d√≠as ‚Üí ${frac('6','8')} (viejo arriba) ‚ùó<br>
                        ‚Ä¢ Menos horas/d√≠a ‚Üí m√°s d√≠as ‚Üí ${frac('8','6')} (viejo arriba) ‚ùó
                    </div>`
                },
                { 
                    q: "12 trabajadores terminan en 15 d√≠as trabajando 6 horas diarias. ¬øCu√°ntos d√≠as tardar√°n 10 trabajadores trabajando 9 horas diarias?", 
                    a: "12", 
                    sol: `
                    <div class="regla-tres-box">
                        <div style="text-align: center; font-size: 1.3em; font-weight: bold; color: #1e40af; margin-bottom: 16px;">üìã REGLA DE TRES COMPUESTA MIXTA</div>
                        <div style="font-size: 1.4em; font-weight: 700; text-align: center; line-height: 2;">
                            <span style="color: #1e40af;">12 trabajadores, 6 h/d√≠a</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626;">15 d√≠as</span><br>
                            <span style="color: #1e40af;">10 trabajadores, 9 h/d√≠a</span> <span style="font-size: 1.8em;">‚Üí</span> <span style="color: #dc2626; font-size: 1.6em;">X</span>
                        </div>
                    </div>

                    <div class="formula-box">
                        <div style="text-align: center; font-size: 1.2em; font-weight: bold; color: #065f46; margin-bottom: 20px;">üî¢ PLANTEAMIENTO:</div>
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap; font-size: 1.5em;">
                            <span style="color: #dc2626; font-weight: bold;">X =</span>
                            <span style="color: #1e3a8a;">15</span>
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('12','10')}
                            <span style="font-size: 1.8em; color: #059669;">√ó</span>
                            ${frac('6','9')}
                        </div>
                        <div style="text-align: center; margin-top: 20px; font-size: 1.3em;">
                            = 15 √ó 1,2 √ó 0,67 = <span style="color: #16a34a; font-weight: bold; font-size: 1.4em;">12 d√≠as</span>
                        </div>
                    </div>

                    <div class="inversa-box">
                        ‚ö†Ô∏è <strong>AMBAS INVERSAS:</strong><br>
                        ‚Ä¢ Menos trabajadores ‚Üí m√°s d√≠as ‚Üí ${frac('12','10')} (viejo arriba) ‚ùó<br>
                        ‚Ä¢ M√°s horas/d√≠a ‚Üí menos d√≠as ‚Üí ${frac('6','9')} (viejo arriba) ‚ùó
                    </div>`
                }
            ],
            "2-2.1": [
                { q: "Un televisor cuesta 500‚Ç¨. Le aplican un 15% de descuento. ¬øPrecio final?", a: "425", sol: "Descuento: (15√ó500)√∑100 = 75‚Ç¨<br>Precio final: 500‚àí75 = <strong style='color: #16a34a; font-size: 1.2em;'>425‚Ç¨</strong>" },
                { q: "Un salario de 1200‚Ç¨ sube un 8%. ¬øNuevo salario?", a: "1296", sol: "Aumento: (8√ó1200)√∑100 = 96‚Ç¨<br>Nuevo salario: 1200+96 = <strong style='color: #16a34a; font-size: 1.2em;'>1296‚Ç¨</strong>" },
                { q: "Unas zapatillas de 80‚Ç¨ se rebajan un 35%. ¬øPrecio rebajado?", a: "52", sol: "Descuento: (35√ó80)√∑100 = 28‚Ç¨<br>Precio final: 80‚àí28 = <strong style='color: #16a34a; font-size: 1.2em;'>52‚Ç¨</strong>" }
            ],
            "2-2.2": [
                { q: "Despu√©s de un 20% de descuento, pagu√© 120‚Ç¨. ¬øPrecio original?", a: "150", sol: "Con 20% descuento pagu√© el 80%<br>Si 80% = 120‚Ç¨, entonces 100% = (120√ó100)√∑80 = <strong style='color: #16a34a; font-size: 1.2em;'>150‚Ç¨</strong>" },
                { q: "Con un 25% de aumento, ahora gano 1500‚Ç¨. ¬øCu√°nto ganaba antes?", a: "1200", sol: "Ahora tengo el 125% (100%+25%)<br>Si 125% = 1500‚Ç¨, entonces 100% = (1500√ó100)√∑125 = <strong style='color: #16a34a; font-size: 1.2em;'>1200‚Ç¨</strong>" },
                { q: "Tras un 15% de descuento, compr√© una bici por 340‚Ç¨. ¬øPrecio sin descuento?", a: "400", sol: "Pagu√© el 85% (100%‚àí15%)<br>Si 85% = 340‚Ç¨, entonces 100% = (340√ó100)√∑85 = <strong style='color: #16a34a; font-size: 1.2em;'>400‚Ç¨</strong>" }
            ],
            "2-2.3": [
                { q: "Un art√≠culo costaba 200‚Ç¨ y ahora cuesta 160‚Ç¨. ¬øQu√© % de descuento?", a: "20", sol: "Descuento: 200‚àí160 = 40‚Ç¨<br>Porcentaje: (40√∑200)√ó100 = <strong style='color: #16a34a; font-size: 1.2em;'>20%</strong>" },
                { q: "Mi sueldo era 1000‚Ç¨ y ahora es 1100‚Ç¨. ¬øQu√© % subi√≥?", a: "10", sol: "Aumento: 1100‚àí1000 = 100‚Ç¨<br>Porcentaje: (100√∑1000)√ó100 = <strong style='color: #16a34a; font-size: 1.2em;'>10%</strong>" },
                { q: "Compr√© algo por 90‚Ç¨ y lo vend√≠ por 108‚Ç¨. ¬øQu√© % gan√©?", a: "20", sol: "Ganancia: 108‚àí90 = 18‚Ç¨<br>Porcentaje: (18√∑90)√ó100 = <strong style='color: #16a34a; font-size: 1.2em;'>20%</strong>" }
            ],
            "3-3.1": [
                { q: "Ana pone 300‚Ç¨, Berta 500‚Ç¨ y Carlos 700‚Ç¨. Si ganan 900‚Ç¨, ¬øcu√°nto recibe cada uno?", a: "180,300,420", sol: "Total aportado: 300+500+700 = 1500‚Ç¨<br>Valor: 900√∑1500 = 0,6‚Ç¨ por cada euro<br>Ana: 300√ó0,6 = <strong>180‚Ç¨</strong><br>Berta: 500√ó0,6 = <strong>300‚Ç¨</strong><br>Carlos: 700√ó0,6 = <strong>420‚Ç¨</strong>" },
                { q: "Dos hermanos heredan 15000‚Ç¨ proporcionalmente a sus edades: 20 y 30 a√±os. ¬øCu√°nto recibe cada uno?", a: "6000,9000", sol: "Total edades: 50 a√±os<br>Valor: 15000√∑50 = 300‚Ç¨ por a√±o<br>Primero (20 a√±os): 20√ó300 = <strong>6000‚Ç¨</strong><br>Segundo (30 a√±os): 30√ó300 = <strong>9000‚Ç¨</strong>" },
                { q: "Repartir 480‚Ç¨ entre 3 personas proporcionalmente a 2, 3 y 5. ¬øCu√°nto recibe cada una?", a: "96,144,240", sol: "Total partes: 2+3+5 = 10<br>Valor: 480√∑10 = 48‚Ç¨ por parte<br>Primera (2 partes): 2√ó48 = <strong>96‚Ç¨</strong><br>Segunda (3 partes): 3√ó48 = <strong>144‚Ç¨</strong><br>Tercera (5 partes): 5√ó48 = <strong>240‚Ç¨</strong>" }
            ],
            "3-3.2": [
                { q: "Repartir 360‚Ç¨ inversamente proporcional a 2, 3 y 6. ¬øCu√°nto recibe cada uno?", a: "180,120,60", sol: "Inversos de 2,3,6 equivalen a 3,2,1<br>Total partes: 3+2+1 = 6<br>Valor: 360√∑6 = 60‚Ç¨ por parte<br>Primero (inverso de 2): 3√ó60 = <strong>180‚Ç¨</strong><br>Segundo (inverso de 3): 2√ó60 = <strong>120‚Ç¨</strong><br>Tercero (inverso de 6): 1√ó60 = <strong>60‚Ç¨</strong><br><em>Quien tiene el n√∫mero menor (2) recibe M√ÅS (180‚Ç¨)</em>" },
                { q: "Tres trabajadores se reparten 240‚Ç¨ inversamente a las faltas: 2, 3 y 4 faltas. ¬øCu√°nto recibe cada uno?", a: "111,74,55", sol: "Inversos de 2,3,4 equivalen a 6,4,3<br>Total partes: 6+4+3 = 13<br>Primero (2 faltas): (6√∑13)√ó240 = <strong>111‚Ç¨</strong><br>Segundo (3 faltas): (4√∑13)√ó240 = <strong>74‚Ç¨</strong><br>Tercero (4 faltas): (3√∑13)√ó240 = <strong>55‚Ç¨</strong><br><em>Quien tuvo menos faltas recibe M√ÅS dinero</em>" }
            ],
            "4-4.1": [
                { q: "Gasto 1/4 de mi dinero en comida y 2/3 de lo que queda en transporte. Me sobran 9‚Ç¨. ¬øCu√°nto ten√≠a?", a: "36", sol: "Despu√©s de comida queda: 3/4 de X<br>Gasto en transporte: (2/3)√ó(3/4)X = 1/2 X<br>Me queda al final: 3/4 X ‚àí 1/2 X = 1/4 X<br>Si 1/4 X = 9‚Ç¨, entonces X = 9√ó4 = <strong style='color: #16a34a; font-size: 1.2em;'>36‚Ç¨</strong>" },
                { q: "El lunes gasto 1/3 de mi dinero. El martes 1/2 de lo que me queda. Me sobran 20‚Ç¨. ¬øCu√°nto ten√≠a?", a: "60", sol: "Despu√©s del lunes queda: 2/3 de X<br>Gasto el martes: (1/2)√ó(2/3)X = 1/3 X<br>Me queda: 2/3 X ‚àí 1/3 X = 1/3 X<br>Si 1/3 X = 20‚Ç¨, entonces X = 20√ó3 = <strong style='color: #16a34a; font-size: 1.2em;'>60‚Ç¨</strong>" },
                { q: "Un dep√≥sito pierde 1/5 por evaporaci√≥n. Luego se consumen 3/4 de lo que queda. Quedan 40 litros. ¬øCapacidad inicial?", a: "200", sol: "Despu√©s de evaporaci√≥n queda: 4/5 de X<br>Se consumen: (3/4)√ó(4/5)X = 3/5 X<br>Quedan: 4/5 X ‚àí 3/5 X = 1/5 X<br>Si 1/5 X = 40L, entonces X = 40√ó5 = <strong style='color: #16a34a; font-size: 1.2em;'>200 litros</strong>" },
                { q: "En una clase, 2/5 son chicas. De las chicas, 3/4 llevan gafas. Si 12 chicas llevan gafas, ¬øcu√°ntos alumnos hay?", a: "40", sol: "Chicas con gafas = (3/4)√ó(2/5)X = 3/10 X<br>Si 3/10 X = 12, entonces X = 12√ó(10/3) = <strong style='color: #16a34a; font-size: 1.2em;'>40 alumnos</strong>" },
                { q: "Leo 1/3 de un libro el primer d√≠a y 1/4 el segundo d√≠a. Me faltan 100 p√°ginas. ¬øP√°ginas del libro?", a: "240", sol: "Leo en total: 1/3 + 1/4 = 7/12 de X<br>Me falta: X ‚àí 7/12 X = 5/12 X<br>Si 5/12 X = 100, entonces X = 100√ó(12/5) = <strong style='color: #16a34a; font-size: 1.2em;'>240 p√°ginas</strong>" }
            ]
        };

        let state = {
            selectedBlock: null,
            selectedLevel: null,
            answers: {},
            showResults: {}
        };

        function normalizeAnswer(answer) {
            return answer.toLowerCase().replace(/\s/g, '').replace(/,/g, '.').replace(/‚Ç¨/g, '');
        }

        function render() {
            const app = document.getElementById('app');
            
            if (!state.selectedBlock) {
                app.innerHTML = renderBlockSelection();
            } else if (!state.selectedLevel) {
                app.innerHTML = renderLevelSelection();
            } else {
                app.innerHTML = renderExercises();
            }
        }

        function renderBlockSelection() {
            return `<div class="min-h-screen bg-gradient-to-br from-blue-100 via-purple-50 to-pink-100 p-4">
                <div class="max-w-7xl mx-auto">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl shadow-2xl p-8 mb-8 text-white">
                        <h1 class="text-4xl font-bold mb-2">üìö Matem√°ticas 2¬∫ ESO</h1>
                        <p class="text-blue-100 text-xl">Problemas con Explicaciones Visuales</p>
                    </div>
                    
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">üéØ Elige un Tipo de Problema</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        ${Object.entries(blocks).map(([id, block]) => `
                            <div onclick="selectBlock('${id}')" class="bg-gradient-to-br ${block.color} rounded-3xl shadow-xl p-8 cursor-pointer transform transition-all hover:scale-105 text-white">
                                <div class="text-6xl mb-4">${block.icon}</div>
                                <h3 class="font-bold text-2xl mb-3">${block.title}</h3>
                                <div class="flex items-center text-white font-bold text-lg">Empezar ‚Üí</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>`;
        }

        function renderLevelSelection() {
            const block = blocks[state.selectedBlock];
            return `<div class="min-h-screen bg-gradient-to-br from-blue-100 via-purple-50 to-pink-100 p-4">
                <div class="max-w-7xl mx-auto">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl shadow-2xl p-8 mb-8 text-white">
                        <h1 class="text-4xl font-bold mb-2">üìö Matem√°ticas 2¬∫ ESO</h1>
                        <button onclick="backToBlocks()" class="mt-4 bg-white text-blue-600 px-6 py-3 rounded-xl font-bold">‚Üê Volver</button>
                    </div>
                    
                    <div class="bg-gradient-to-r ${block.color} rounded-3xl shadow-xl p-8 mb-8 text-white">
                        <div class="text-6xl mb-4">${block.icon}</div>
                        <h2 class="text-3xl font-bold">${block.title}</h2>
                    </div>

                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Elige un Nivel:</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        ${Object.entries(levelNames[state.selectedBlock] || {}).map(([levelId, levelName]) => `
                            <div onclick="selectLevel('${levelId}')" class="bg-white rounded-2xl shadow-xl p-8 cursor-pointer hover:shadow-2xl transition-all">
                                <span class="bg-gradient-to-r ${block.color} text-white px-6 py-2 rounded-full font-bold text-lg">
                                    Nivel ${levelId}
                                </span>
                                <h3 class="font-bold text-xl text-gray-800 mt-3">${levelName}</h3>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>`;
        }

        function renderExercises() {
            const exercises = exerciseData[`${state.selectedBlock}-${state.selectedLevel}`] || [];
            return `<div class="min-h-screen bg-gradient-to-br from-blue-100 via-purple-50 to-pink-100 p-4">
                <div class="max-w-7xl mx-auto">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl shadow-2xl p-8 mb-8 text-white">
                        <h1 class="text-4xl font-bold mb-2">üìö Matem√°ticas 2¬∫ ESO</h1>
                        <div class="flex gap-3 mt-4 flex-wrap">
                            <button onclick="backToLevels()" class="bg-white text-blue-600 px-6 py-3 rounded-xl font-bold">‚Üê Niveles</button>
                            <button onclick="backToBlocks()" class="bg-white text-blue-600 px-6 py-3 rounded-xl font-bold">üè† Inicio</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                        <h2 class="text-3xl font-bold text-gray-800">üìö Ejercicios</h2>
                    </div>

                    <div class="space-y-8">
                        ${exercises.map((ex, idx) => {
                            const key = `${state.selectedBlock}-${state.selectedLevel}-${idx}`;
                            const result = state.showResults[key];
                            return `<div class="bg-white border-4 ${result !== undefined ? (result ? 'border-green-300' : 'border-red-300') : 'border-gray-200'} rounded-2xl p-8 shadow-xl">
                                <div class="flex items-start gap-4">
                                    <span class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl font-bold text-xl">
                                        ${idx + 1}
                                    </span>
                                    <div class="flex-1">
                                        <div class="text-2xl font-bold text-gray-800 mb-6">${ex.q}</div>
                                        
                                        <div class="flex gap-3 mb-4">
                                            <input type="text" id="answer-${key}" placeholder="Tu respuesta" 
                                                class="flex-1 px-6 py-4 border-4 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none text-xl"
                                                ${result !== undefined ? 'disabled' : ''}>
                                            <button onclick="checkAnswer('${key}', '${ex.a}')" 
                                                class="px-10 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 font-bold text-xl"
                                                ${result !== undefined ? 'disabled style="opacity: 0.5;"' : ''}>
                                                ‚úì Comprobar
                                            </button>
                                        </div>

                                        ${result !== undefined ? `<div class="mt-6 p-6 rounded-2xl ${result ? 'bg-green-50 border-4 border-green-300' : 'bg-red-50 border-4 border-red-300'}">
                                            <div class="flex items-center gap-3 mb-4">
                                                <span class="text-4xl">${result ? 'üéâ' : '‚ùå'}</span>
                                                <span class="font-bold text-2xl ${result ? 'text-green-800' : 'text-red-800'}">
                                                    ${result ? '¬°CORRECTO!' : 'Aprende c√≥mo se hace:'}
                                                </span>
                                            </div>
                                            <div class="bg-white rounded-xl p-6">
                                                <p class="font-bold text-lg text-gray-800 mb-4">üìñ SOLUCI√ìN PASO A PASO:</p>
                                                <div class="text-lg text-gray-700">${ex.sol}</div>
                                            </div>
                                        </div>` : ''}
                                    </div>
                                </div>
                            </div>`;
                        }).join('')}
                    </div>
                </div>
            </div>`;
        }

        window.selectBlock = function(id) {
            state.selectedBlock = id;
            render();
        };

        window.selectLevel = function(id) {
            state.selectedLevel = id;
            render();
        };

        window.backToBlocks = function() {
            state.selectedBlock = null;
            state.selectedLevel = null;
            render();
        };

        window.backToLevels = function() {
            state.selectedLevel = null;
            render();
        };

        window.checkAnswer = function(key, correct) {
            const input = document.getElementById('answer-' + key);
            if (input) {
                state.answers[key] = input.value;
            }
            const userAnswer = normalizeAnswer(state.answers[key] || '');
            const correctAnswer = normalizeAnswer(correct);
            state.showResults[key] = userAnswer === correctAnswer;
            render();
        };

        document.addEventListener('DOMContentLoaded', render);
    </script>
</body>
</html>
